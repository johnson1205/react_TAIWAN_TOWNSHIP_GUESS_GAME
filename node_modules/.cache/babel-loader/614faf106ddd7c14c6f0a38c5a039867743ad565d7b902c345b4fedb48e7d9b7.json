{"ast":null,"code":"function compare(a, b) {\n  return a[1][2] - b[1][2];\n}\nexport default function () {\n  var heap = {},\n    array = [],\n    size = 0;\n  heap.push = function (object) {\n    up(array[object._ = size] = object, size++);\n    return size;\n  };\n  heap.pop = function () {\n    if (size <= 0) return;\n    var removed = array[0],\n      object;\n    if (--size > 0) object = array[size], down(array[object._ = 0] = object, 0);\n    return removed;\n  };\n  heap.remove = function (removed) {\n    var i = removed._,\n      object;\n    if (array[i] !== removed) return; // invalid request\n    if (i !== --size) object = array[size], (compare(object, removed) < 0 ? up : down)(array[object._ = i] = object, i);\n    return i;\n  };\n  function up(object, i) {\n    while (i > 0) {\n      var j = (i + 1 >> 1) - 1,\n        parent = array[j];\n      if (compare(object, parent) >= 0) break;\n      array[parent._ = i] = parent;\n      array[object._ = i = j] = object;\n    }\n  }\n  function down(object, i) {\n    while (true) {\n      var r = i + 1 << 1,\n        l = r - 1,\n        j = i,\n        child = array[j];\n      if (l < size && compare(array[l], child) < 0) child = array[j = l];\n      if (r < size && compare(array[r], child) < 0) child = array[j = r];\n      if (j === i) break;\n      array[child._ = i] = child;\n      array[object._ = i = j] = object;\n    }\n  }\n  return heap;\n}","map":{"version":3,"names":["compare","a","b","heap","array","size","push","object","up","_","pop","removed","down","remove","i","j","parent","r","l","child"],"sources":["C:/Users/johns/OneDrive/桌面/practice/map/node_modules/topojson-simplify/src/heap.js"],"sourcesContent":["function compare(a, b) {\n  return a[1][2] - b[1][2];\n}\n\nexport default function() {\n  var heap = {},\n      array = [],\n      size = 0;\n\n  heap.push = function(object) {\n    up(array[object._ = size] = object, size++);\n    return size;\n  };\n\n  heap.pop = function() {\n    if (size <= 0) return;\n    var removed = array[0], object;\n    if (--size > 0) object = array[size], down(array[object._ = 0] = object, 0);\n    return removed;\n  };\n\n  heap.remove = function(removed) {\n    var i = removed._, object;\n    if (array[i] !== removed) return; // invalid request\n    if (i !== --size) object = array[size], (compare(object, removed) < 0 ? up : down)(array[object._ = i] = object, i);\n    return i;\n  };\n\n  function up(object, i) {\n    while (i > 0) {\n      var j = ((i + 1) >> 1) - 1,\n          parent = array[j];\n      if (compare(object, parent) >= 0) break;\n      array[parent._ = i] = parent;\n      array[object._ = i = j] = object;\n    }\n  }\n\n  function down(object, i) {\n    while (true) {\n      var r = (i + 1) << 1,\n          l = r - 1,\n          j = i,\n          child = array[j];\n      if (l < size && compare(array[l], child) < 0) child = array[j = l];\n      if (r < size && compare(array[r], child) < 0) child = array[j = r];\n      if (j === i) break;\n      array[child._ = i] = child;\n      array[object._ = i = j] = object;\n    }\n  }\n\n  return heap;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}